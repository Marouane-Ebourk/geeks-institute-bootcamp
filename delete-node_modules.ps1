# Default to current directory if no argument is provided
$targetDir = if ($args.Count -gt 0) { $args[0] } else { Get-Location }

Write-Host "Searching for node_modules folders in: $targetDir"

# Find all node_modules directories
$folders = Get-ChildItem -Path $targetDir -Recurse -Directory -Force -ErrorAction SilentlyContinue | Where-Object { $_.Name -eq "node_modules" }

foreach ($folder in $folders) {
    Write-Host "Deleting: $($folder.FullName)"
    Remove-Item -Path $folder.FullName -Recurse -Force -ErrorAction SilentlyContinue
}

Write-Host "All node_modules folders deleted."
